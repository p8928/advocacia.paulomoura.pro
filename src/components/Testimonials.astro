<section class="py-24 sm:py-32 px-4 sm:px-8">
  <div class="max-w-4xl mx-auto text-center">
    <h2 class="font-serif text-4xl sm:text-5xl lg:text-6xl" style="line-height: 1.5 !important;">
      A seriedade <span class="relative inline-block"><span class="animated-underline">que você espera</span></span>, com o respeito que merece.
    </h2>
    <div class="w-48 h-px bg-brand-text mx-auto my-12"></div>
    <p class="text-sm sm:text-lg leading-relaxed font-normal max-w-3xl mx-auto">
      Tratamos seu caso com profissionalismo, ética e respeito, oferecendo toda a transparência a fim de que você compreenda cada etapa nos mínimos detalhes.
    </p>
    <div class="mt-20 max-w-3xl mx-auto relative">
      <!-- Testimonial Slider -->
      <div class="swiper testimonial-swiper px-10">
        <div class="swiper-wrapper">
          <!-- Slide 1 -->
          <div class="swiper-slide">
            <div class="text-center px-8">
              <div class="flex justify-center text-gold-gradient mb-4 text-2xl">★★★★★</div>
              <p class="text-sm sm:text-base font-[400] max-w-md mx-auto">"Equipe atenciosa e esclarecedora! Me ajudaram a entender que eu tinha mais direitos a recorrer do que eu pensava, e deu tudo certo."</p>
              <p class="mt-3 font-bold text-sm">Juliana Santos</p>
              <a href="#" class="inline-flex items-center mt-2 text-xs text-gray-500 hover:text-brand-primary transition-colors duration-300">
                <img src="/images/google_g_icon-small.webp" alt="Google Icon" class="w-3 h-3 mr-2">
                Verificar no Google
              </a>
            </div>
          </div>
          <!-- Slide 2 -->
          <div class="swiper-slide">
            <div class="text-center px-8">
              <div class="flex justify-center text-gold-gradient mb-4 text-2xl">★★★★★</div>
              <p class="text-sm sm:text-base font-[400] max-w-md mx-auto">"Fui bem atendido e assessorado em todas as etapas do processo."</p>
              <p class="mt-3 font-bold text-sm">Douglas Ramos</p>
              <a href="#" class="inline-flex items-center mt-2 text-xs text-gray-500 hover:text-brand-primary transition-colors duration-300">
                <img src="/images/google_g_icon-small.webp" alt="Google Icon" class="w-3 h-3 mr-2">
                Verificar no Google
              </a>
            </div>
          </div>
          <!-- Slide 3 -->
          <div class="swiper-slide">
            <div class="text-center px-8">
              <div class="flex justify-center text-gold-gradient mb-4 text-2xl">★★★★★</div>
              <p class="text-sm sm:text-base font-[400] max-w-md mx-auto">"Consultei outros escritórios que não deram a devida atenção ao meu caso. Com o pessoal da M&B foi completamente diferente, hoje posso celebrar a conquista dos meus direitos."</p>
              <p class="mt-3 font-bold text-sm">Mariana Azevedo</p>
              <a href="#" class="inline-flex items-center mt-2 text-xs text-gray-500 hover:text-brand-primary transition-colors duration-300">
                <img src="/images/google_g_icon-small.webp" alt="Google Icon" class="w-3 h-3 mr-2">
                Verificar no Google
              </a>
            </div>
          </div>
          <!-- Slide 4 -->
          <div class="swiper-slide">
            <div class="text-center px-8">
              <div class="flex justify-center text-gold-gradient mb-4 text-2xl">★★★★★</div>
              <p class="text-sm sm:text-base font-[400] max-w-md mx-auto">"Excelentes profissionais!"</p>
              <p class="mt-3 font-bold text-sm">Ricardo C. Basilio</p>
              <a href="#" class="inline-flex items-center mt-2 text-xs text-gray-500 hover:text-brand-primary transition-colors duration-300">
                <img src="/images/google_g_icon-small.webp" alt="Google Icon" class="w-3 h-3 mr-2">
                Verificar no Google
              </a>
            </div>
          </div>
        </div>
        <!-- Navigation buttons -->
        <div class="swiper-button-prev text-brand-primary left-0 transition-transform duration-300 ease-in-out hover:scale-110 hover:drop-shadow-lg"></div>
        <div class="swiper-button-next text-brand-primary right-0 transition-transform duration-300 ease-in-out hover:scale-110 hover:drop-shadow-lg"></div>
      </div>
    </div>
  </div>
</section>

<style is:global>
  .animated-underline::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: #E6B333; /* Lighter gold */
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.7s ease-in-out;
    transition-delay: 0.5s;
  }

  section:hover .animated-underline::after {
    transform: scaleX(1);
  }

  /* Override Swiper default blue color for navigation arrows */
  .testimonial-swiper .swiper-button-next,
  .testimonial-swiper .swiper-button-prev {
    color: #E6B333; /* Gold color from the theme */
  }
</style>

<script>
  import Swiper from 'swiper';
  import { Navigation, Autoplay } from 'swiper/modules';
  import 'swiper/css';
  import 'swiper/css/navigation';

  function initTestimonialSwiper() {
    const swiperEl = document.querySelector('.testimonial-swiper');
    if (swiperEl && !swiperEl.hasAttribute('data-swiper-initialized')) {
      const slides = swiperEl.querySelectorAll('.swiper-slide');
      new Swiper(swiperEl, {
        modules: [Navigation, Autoplay],
        loop: slides.length > 1,
        slidesPerView: 1,
        spaceBetween: 30,
        autoplay: {
          delay: 5000,
          disableOnInteraction: false,
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        grabCursor: true,
      });
      swiperEl.setAttribute('data-swiper-initialized', 'true');
    }
  }
  document.addEventListener('DOMContentLoaded', initTestimonialSwiper);
</script>
