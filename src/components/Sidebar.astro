<!-- Hamburger Button -->
<button id="hamburger-button" aria-label="Abrir menu" class="fixed top-4 right-4 sm:top-8 sm:right-8 p-2 text-brand-text z-50 transition-transform duration-300 ease-in-out hover:scale-110 hover:bg-brand-primary/10 rounded-full">
  <svg id="menu-icon" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
  </svg>
  <svg id="close-icon" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
  </svg>
</button>

<!-- Sidebar Menu -->
<aside id="sidebar-menu" class="fixed top-0 right-0 h-full w-full md:w-72 bg-gradient-to-br from-[#F7F4EE] to-[#F3F0E9] z-40 transform translate-x-full transition-transform duration-500 ease-in-out shadow-[0_8px_30px_rgb(0,0,0,0.12)] md:shadow-none flex items-center justify-center">
  <div class="absolute top-8 left-1/2 -translate-x-1/2 text-center md:hidden">
    <img src="/images/logo_fic.webp" alt="M&B Logo" class="h-10 sm:h-12">
  </div>
  <nav class="pt-24 p-8">
    <ul class="space-y-4 text-center">
      <li><a href="#sobre" class="font-outfit font-normal tracking-widest uppercase text-sm text-brand-text hover:text-brand-primary relative after:content-[''] after:absolute after:w-0 after:h-px after:bg-brand-primary after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:transition-all after:duration-300 hover:after:w-full">Sobre</a></li>
      <li><a href="#sucesso" class="font-outfit font-normal tracking-widest uppercase text-sm text-brand-text hover:text-brand-primary relative after:content-[''] after:absolute after:w-0 after:h-px after:bg-brand-primary after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:transition-all after:duration-300 hover:after:w-full">Histórias de Sucesso</a></li>
      <li><a href="#ajuda" class="font-outfit font-normal tracking-widest uppercase text-sm text-brand-text hover:text-brand-primary relative after:content-[''] after:absolute after:w-0 after:h-px after:bg-brand-primary after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:transition-all after:duration-300 hover:after:w-full">Como podemos ajudar</a></li>
      <li><a href="#" class="font-outfit font-normal tracking-widest uppercase text-sm text-brand-text hover:text-brand-primary relative after:content-[''] after:absolute after:w-0 after:h-px after:bg-brand-primary after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:transition-all after:duration-300 hover:after:w-full">Blog</a></li>
      <li><a href="#contato" class="font-outfit font-normal tracking-widest uppercase text-sm text-brand-text hover:text-brand-primary relative after:content-[''] after:absolute after:w-0 after:h-px after:bg-brand-primary after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:transition-all after:duration-300 hover:after:w-full">Contato</a></li>
      
      <!-- Address and Map Link -->
      <li class="pt-8 text-center">
        <div class="mb-6">
          <p class="font-outfit text-[11px] font-normal tracking-normal text-brand-text/70">Baker Street, 221 | B</p>
          <p class="font-outfit text-[11px] font-normal tracking-normal text-brand-text/70">Marylebone, London | UK</p>
          <div class="w-1/3 h-px bg-brand-primary/20 mx-auto my-2"></div>
          <p class="font-outfit text-[11px] font-normal tracking-normal text-brand-text/70">Segunda à sexta | 9:00 às 18:00</p>
        </div>
        <a href="https://www.google.com/maps/search/?api=1&query=R.+Maestro+Trist%C3%A3o+Mariano+da+Costa%2C+94+-+Vila+Nova%2C+Itu+-+SP%2C+13309-034" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center space-x-3 group">
          <svg class="w-6 h-6 text-brand-primary/80 transition-all duration-300 ease-in-out group-hover:scale-110 group-hover:text-brand-primary icon-pulse" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 20l-4.95-5.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
          </svg>
          <span class="font-outfit font-normal text-xs text-brand-text hover:text-brand-primary transition-colors relative after:content-[''] after:absolute after:w-0 after:h-px after:bg-brand-primary after:bottom-0 after:left-1/2 after:-translate-x-1/2 after:transition-all after:duration-300 group-hover:after:w-full">Encontre-nos no Google Maps</span>
        </a>
      </li>

      <li class="pt-4">
        <button class="btn-hygge">Tire suas dúvidas</button>
      </li>
    </ul>
  </nav>
</aside>

<!-- Overlay -->
<div id="overlay" class="fixed inset-0 z-30 hidden bg-black/20"></div>

<script>
  // Sidebar Menu Script
  document.addEventListener('DOMContentLoaded', () => {
    const hamburgerButton = document.getElementById('hamburger-button');
    const sidebarMenu = document.getElementById('sidebar-menu');
    const overlay = document.getElementById('overlay');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    const menuLinks = document.querySelectorAll('#sidebar-menu a');

    if (!hamburgerButton || !sidebarMenu || !overlay || !menuIcon || !closeIcon) return;

    const toggleMenu = () => {
      const isOpen = !sidebarMenu.classList.contains('translate-x-full');
      sidebarMenu.classList.toggle('translate-x-full', isOpen);
      overlay.classList.toggle('hidden', isOpen);
      
      // Explicitly manage icon visibility
      if (isOpen) {
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
      } else {
        menuIcon.classList.add('hidden');
        closeIcon.classList.remove('hidden');
      }
    };

    hamburgerButton.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', toggleMenu);

    menuLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        const href = link.getAttribute('href');
        // Only prevent default for anchor links
        if (href && href.startsWith('#')) {
          e.preventDefault();
          toggleMenu();
          
          setTimeout(() => {
            const targetElement = document.querySelector(href);
            if (targetElement) {
              targetElement.scrollIntoView({ behavior: 'smooth' });
            }
          }, 500); // Wait for menu to close
        }
      });
    });
  });
</script>
